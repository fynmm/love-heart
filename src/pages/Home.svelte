<script lang="ts">
  import Layout from "../lib/Layout.svelte";
  import Heart from "../lib/Heart.svelte";
  import Love from "../lib/Love.svelte";

  // ‰ø°Â∞Å
  let imageSrc: string = "/close.jpg";

  // Â≠òÊîæ name ÁöÑÂèòÈáè
  let yourName: string = "Â©∑ÂÆù";

  // ËÆæÁΩÆ isDisabled ÁöÑÂÄºÔºåÊéßÂà∂ÊòØÂê¶Â±ïÁ§∫ Heart
  let isShowLove: string = "";
  // ËÆæÁΩÆ isShowInput ÁöÑÂÄºÔºåÊéßÂà∂ÊòØÂê¶Â±ïÁ§∫ËæìÂÖ•Ê°Ü
  let isShowInput: boolean = true;

  // ÂΩìÊåâÈíÆË¢´ÁÇπÂáªÊó∂ÔºåÂ∞Ü name ÁöÑÂÄºËµãÁªô yourName
  function handleClick() {
    console.log("click");
    console.log("yourName:", yourName, "length:", yourName.length);
    // ÈöêËóèËæìÂÖ•Ê°ÜÂπ∂Êõ¥ÊîπÂõæÁâá
    isShowInput = !isShowInput;
    imageSrc = yourName.length > 0 ? "/open.jpg" : "/close.jpg";
    // Á≠âÂæÖ
    setTimeout(() => {
      // if (yourName.length > 0) {
      //   push("/heart");
      // }
      isShowLove = "love1";
      setTimeout(() => {
        isShowLove = "love2";
      }, 2000);
    }, 1000);
  }
</script>

{#if isShowLove === ""}
  <Layout say={"ÂàöÂ•ΩÔºåËøôÈáåÊúâ‰∏ÄÂ∞ÅÁªô‰Ω†ÁöÑ‰ø°"}>
    {#if isShowInput}
      <form class="pl-8 sm:pl-16 transform translate-y-24">
        <label for="name" class="text-xl font-thin">‰∫≤Áà±ÁöÑÔºö</label>
        <input
          type="text"
          name={yourName}
          id="name"
          disabled
          required
          placeholder="‰Ω†ÁöÑÂêçÂ≠ó"
          bind:value={yourName}
          class="border-b bg-gray-100 h-9 p-2 w-32 rounded-md"
        />
      </form>
    {/if}
    <!-- ‰ø°Â∞ÅÂõæÁâá -->
    <img src={imageSrc} alt="Love letter" />

    <div class="text-center pt-6">
      <button
        class="px-8 py-2 bg-pink-300 text-white rounded-lg"
        on:click={handleClick}
      >
        ÊãÜÂºÄ‰ø°Â∞Å
      </button>
    </div>
  </Layout>
{:else if isShowLove === "love1"}
  <Love />
{:else}
  <Layout say={"üòç‰Ω†"}>
    <div class="text-center">
      <Heart name={yourName} />
    </div>
  </Layout>
{/if}
